<script>
//////////////////////
// CONSTANTES
//////////////////////

const ICONO_CHECK = 'bi-check2-square';
const ICONO_PAPELERA = 'bi-trash';
const ICONO_CONTACTO = 'bi-person-plus-fill';
const ICONO_ERROR = 'bi-bug';
const ICONO_ADVERTENCIA = 'bi-exclamation-square';  

const LOTTIE_CHECK = 'https://assets3.lottiefiles.com/private_files/lf30_dfspihm8.json';
const LOTTIE_PAPELERA = 'https://assets8.lottiefiles.com/packages/lf20_WcyRdM.json';
const LOTTIE_CONTACTO = 'https://assets1.lottiefiles.com/packages/lf20_sOjs8q/add_contact_05.json';
const LOTTIE_ERROR = 'https://assets10.lottiefiles.com/packages/lf20_yw3nyrsv.json';
const LOTTIE_PELIGRO = 'https://assets2.lottiefiles.com/packages/lf20_qbuxqwzg.json';
const LOTTIE_LOADER_NUBE = 'https://assets8.lottiefiles.com/private_files/lf30_m5jf97io.json';
const LOTTIE_LOADER_AVION_PAPEL = 'https://assets7.lottiefiles.com/packages/lf20_x62chJ.json';

    function copiarContenido(icono, id)
    {
        let texto = document.getElementById(id).textContent;

        navigator.clipboard.writeText(texto)
        .then(() =>
        {
            icono.classList.remove('bi-clipboard');
            icono.classList.add('bi-check-lg');
            icono.title = 'Copiado';            
            bootstrap.Tooltip.getOrCreateInstance(icono).show();
            restaurarIcono(icono);
        });
    }

    function restaurarIcono(icono)
    {
        setTimeout(function()
        {
            icono.classList.remove('bi-check-lg');
            icono.classList.add('bi-clipboard');
            icono.title = '';
            bootstrap.Tooltip.getInstance(icono).dispose(); 
        }, 2000);
    }

    function limpiar()
    {       
        eliminarTarjetas();
        crearLoaderLottie('divContactos', LOTTIE_LOADER_AVION_PAPEL);
    }

    function mostrar()
    {   
        crearTarjetas();      
    }

    function extraerContactos(datos)
    {
        let contactos = [];
        for(let i = 1; i<datos.length; i++)
        {
            contactos.push(new Contacto(datos[i][0], datos[i][1], datos[i][2], datos[i][3], datos[i][4], i+1));
        }
        return contactos;
    }

    //habilitar popovers
    var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]'))
    var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
  return new bootstrap.Popover(popoverTriggerEl)
})


</script>